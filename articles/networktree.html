<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>networktree: Recursive partitioning of network models • networktree</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="networktree: Recursive partitioning of network models">
<meta property="og:description" content="networktree">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">networktree</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/networktree.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/returns.html">Exchange Rates Networks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/paytonjjones/networktree/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="networktree_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>networktree: Recursive partitioning of network models</h1>
                        <h4 data-toc-skip class="author">Payton Jones, Thorsten Simon, Achim Zeileis</h4>
            
            <h4 data-toc-skip class="date">last modified: 2021-2-3</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/paytonjjones/networktree/blob/HEAD/vignettes/networktree.Rmd" class="external-link"><code>vignettes/networktree.Rmd</code></a></small>
      <div class="hidden name"><code>networktree.Rmd</code></div>

    </div>

    
    
<div class="section level3">
<h3 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<p>The <strong><em>networktree</em></strong> package allows you to test whether sample characteristics (e.g., gender, age) alter network structures. A variety of sample characteristics can be tested at once, and <strong><em>networktree</em></strong> will automatically identify the most influential splits and partition your sample accordingly.</p>
<p>Each subsequent time your sample is partitioned, you lose statistical power. Thus, if you are hoping to find multiple sources of heterogeneity (multiple splits), it is recommended that you have a large sample size (~800 or greater). For an overview of the statistical power of networktree, please see the associated <a href="https://osf.io/ha4cw" class="external-link">publication</a>.</p>
<p>Let’s take a look at how to use the package.</p>
</div>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>Install <strong><em>networktree</em></strong> from CRAN</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.package</span><span class="op">(</span><span class="st">"networktree"</span><span class="op">)</span></span></code></pre></div>
<p>or from GitHub</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"paytonjjones/networktree"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="load-data">Load data<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h3>
<p>We can try out some examples with the <em>workaholic</em> dataset that is included in the package. It includes items from the Obsessive-Compulsive Inventory - Revised (OCIR) which we can use to form a network (for more info, see ?workaholic).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://paytonjjones.github.io/networktree/" class="external-link">networktree</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">workaholic</span><span class="op">)</span></span>
<span><span class="va">OCD_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"OCIR"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">18</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span><span class="va">OCD_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hoard1"</span>,<span class="st">"check1"</span>,<span class="st">"arrange1"</span>,<span class="st">"count"</span>,<span class="st">"contaminate"</span>,</span>
<span>               <span class="st">"thought1"</span>,<span class="st">"hoard2"</span>,<span class="st">"check2"</span>,</span>
<span>               <span class="st">"arrange2"</span>,<span class="st">"numbers1"</span>,<span class="st">"wash1"</span>,<span class="st">"thought2"</span>,</span>
<span>               <span class="st">"hoard3"</span>, <span class="st">"check3"</span>, <span class="st">"arrange3"</span>, <span class="st">"numbers2"</span>,</span>
<span>               <span class="st">"wash2"</span>, <span class="st">"thought3"</span><span class="op">)</span></span>
<span><span class="va">cor_OCD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">workaholic</span><span class="op">[</span>,<span class="va">OCD_vars</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">q1</span> <span class="op">&lt;-</span> <span class="fu">qgraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/qgraph/man/qgraph.html" class="external-link">qgraph</a></span><span class="op">(</span><span class="va">cor_OCD</span>, layout <span class="op">=</span> <span class="st">"spring"</span>, labels <span class="op">=</span> <span class="va">OCD_names</span><span class="op">)</span></span></code></pre></div>
<p><img src="networktree_files/figure-html/initial_graph-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="using-networktree-the-basics">Using networktree(): The basics<a class="anchor" aria-label="anchor" href="#using-networktree-the-basics"></a>
</h3>
<p>Now we can try out the <code><a href="../reference/networktree.html">networktree()</a></code> function. For now, let’s just look to see if there is a split by gender. All we have to do is enter the network-related variables in the <code>nodevars</code> argument, and the split variables in the <code>splitvars</code> argument.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cor_gender</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/networktree.html">networktree</a></span><span class="op">(</span>nodevars <span class="op">=</span> <span class="va">workaholic</span><span class="op">[</span>,<span class="va">OCD_vars</span><span class="op">]</span>,</span>
<span>                          splitvars <span class="op">=</span> <span class="va">workaholic</span><span class="op">[</span>, <span class="st">"Gender"</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cor_gender</span><span class="op">)</span></span></code></pre></div>
<p><img src="networktree_files/figure-html/split_gender-1.png" width="100%"></p>
<p>If you want to include more split variables, you can include as many as you want. The algorithm prioritizes the “biggest” splits first and always considers significance level, so you don’t need to worry too much about overfitting. We used a correlation network before, but we can also use other types of estimation by using the <code>transform</code> argument. Here we will set to “glasso” (we could also use “pcor”).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">glasso</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/networktree.html">networktree</a></span><span class="op">(</span>nodevars <span class="op">=</span> <span class="va">workaholic</span><span class="op">[</span>, <span class="va">OCD_vars</span><span class="op">]</span>,</span>
<span>                      splitvars <span class="op">=</span> <span class="va">workaholic</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Gender"</span>, <span class="st">"Workaholism_diagnosis"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>                      transform <span class="op">=</span> <span class="st">"glasso"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">glasso</span>, labels <span class="op">=</span> <span class="va">OCD_names</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in (function (input, ...) : 'minimum' set to absolute value</span></span></code></pre>
<pre><code><span><span class="co">## Warning in (function (input, ...) : 'minimum' set to absolute value</span></span></code></pre>
<pre><code><span><span class="co">## Warning in (function (input, ...) : 'minimum' set to absolute value</span></span></code></pre>
<p><img src="networktree_files/figure-html/glasso-1.png" width="100%"></p>
<p>The default of <code><a href="../reference/networktree.html">networktree()</a></code> is to use model-based recursive partitioning (<code>?mob</code>). However, it can also use conditional inference trees (<code>?ctree</code>). This can be controlled using the <code>method</code> argument. For more details on the differences between the two approaches, see the associated <a href="https://rdcu.be/b9Kyw" class="external-link">publication</a>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cor_gender_ctree</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/networktree.html">networktree</a></span><span class="op">(</span>nodevars <span class="op">=</span> <span class="va">workaholic</span><span class="op">[</span>, <span class="va">OCD_vars</span><span class="op">]</span>,</span>
<span>                          splitvars <span class="op">=</span> <span class="va">workaholic</span><span class="op">[</span>, <span class="st">"Gender"</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span>,</span>
<span>                          method <span class="op">=</span> <span class="st">"ctree"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cor_gender_ctree</span><span class="op">)</span></span></code></pre></div>
<p><img src="networktree_files/figure-html/split_gender_ctree-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="understanding-the-results-comparetree-and-getnetwork">Understanding the results: comparetree() and getnetwork()<a class="anchor" aria-label="anchor" href="#understanding-the-results-comparetree-and-getnetwork"></a>
</h3>
<p>As you have likely already noticed, interpreting the results can difficult when you have a large network or many splits in your tree. Everything becomes small so quickly! Luckily, there are a couple of tools to help you.</p>
<p>Each part of the tree is given a label. You can most easily see these labels with the <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method for <code>networktree</code> objects.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smalltree</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/networktree.html">networktree</a></span><span class="op">(</span>nodevars <span class="op">=</span> <span class="va">workaholic</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OCIR1"</span>, <span class="st">"OCIR2"</span>, <span class="st">"OCIR3"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>                          splitvars <span class="op">=</span> <span class="va">workaholic</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Gender"</span>, <span class="st">"Workaholism_diagnosis"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">smalltree</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Network tree object</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Model formula:</span></span>
<span><span class="co">## OCIR1 + OCIR2 + OCIR3 ~ Gender + Workaholism_diagnosis</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fitted party:</span></span>
<span><span class="co">## [1] root</span></span>
<span><span class="co">## |   [2] Workaholism_diagnosis &lt;= 0</span></span>
<span><span class="co">## |   [3] Workaholism_diagnosis &gt; 0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Number of inner nodes:    1</span></span>
<span><span class="co">## Number of terminal nodes: 2</span></span>
<span><span class="co">## Number of parameters per node: 3</span></span>
<span><span class="co">## Objective function: 69250.49</span></span></code></pre>
<p>Under the ‘Fitted party’ section, you can see that the branches have the IDs [2] and [3]. The root, with ID [1], allows you to access the full data. We can use the IDs of the branches to access them.</p>
<p>You can access the specific partition of the data:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">smalltree</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   OCIR1 OCIR2 OCIR3 Gender Workaholism_diagnosis</span></span>
<span><span class="co">## 1     0     0     0   Male                     0</span></span>
<span><span class="co">## 2     0     0     0 Female                     0</span></span>
<span><span class="co">## 3     0     1     0 Female                     0</span></span>
<span><span class="co">## 4     0     0     0 Female                     0</span></span>
<span><span class="co">## 5     0     1     0 Female                     0</span></span>
<span><span class="co">## 6     0     0     0 Female                     0</span></span></code></pre>
<p>The <code><a href="../reference/getnetwork.html">getnetwork()</a></code> function allows you to get the network (adjacency matrix) using the ID.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/getnetwork.html">getnetwork</a></span><span class="op">(</span><span class="va">smalltree</span>, id <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##           OCIR1     OCIR2     OCIR3</span></span>
<span><span class="co">## OCIR1 0.0000000 0.3225396 0.1787196</span></span>
<span><span class="co">## OCIR2 0.3225396 0.0000000 0.3981457</span></span>
<span><span class="co">## OCIR3 0.1787196 0.3981457 0.0000000</span></span></code></pre>
<p>Another common goal is to understand the differences between the networks. This is made easy with the <code><a href="../reference/comparetree.html">comparetree()</a></code> function.</p>
<p>First, comparetree provides a list of “highlights”: edges in the network that had large differences between the two partitions. It gives the value of the edge in each partition, as well as the difference between the two edgs.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smalltree_compare</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/comparetree.html">comparetree</a></span><span class="op">(</span><span class="va">smalltree</span>, id1 <span class="op">=</span> <span class="fl">2</span>, id2 <span class="op">=</span> <span class="fl">3</span>, highlights <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">smalltree_compare</span><span class="op">$</span><span class="va">highlights</span></span></code></pre></div>
<pre><code><span><span class="co">##   node1 node2       id1       id2 (id1 - id2)</span></span>
<span><span class="co">## 1 OCIR1 OCIR2 0.2433007 0.3225396 -0.07923887</span></span>
<span><span class="co">## 2 OCIR2 OCIR3 0.3419148 0.3981457 -0.05623092</span></span>
<span><span class="co">## 3 OCIR1 OCIR3 0.1436213 0.1787196 -0.03509838</span></span></code></pre>
<p>Second, it gives you an adjacency matrix that represents the differences for each edge (id1 - id2).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smalltree_compare</span><span class="op">$</span><span class="va">matrix</span></span></code></pre></div>
<pre><code><span><span class="co">##             OCIR1       OCIR2       OCIR3</span></span>
<span><span class="co">## OCIR1  0.00000000 -0.07923887 -0.03509838</span></span>
<span><span class="co">## OCIR2 -0.07923887  0.00000000 -0.05623092</span></span>
<span><span class="co">## OCIR3 -0.03509838 -0.05623092  0.00000000</span></span></code></pre>
<p>Third, it allows you to easily plot those two networks side by side:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smalltree_compare</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/comparetree.html">comparetree</a></span><span class="op">(</span><span class="va">smalltree</span>, id1 <span class="op">=</span> <span class="fl">2</span>, id2 <span class="op">=</span> <span class="fl">3</span>, highlights <span class="op">=</span> <span class="fl">3</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="networktree_files/figure-html/comparetree3-1.png" width="100%"></p>
<p>And fourth, it allows you to plot the adjacency matrix representing the differences (green edges mean the edge was larger in id1, red edges mean the edge was larger in id2):</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smalltree_compare</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/comparetree.html">comparetree</a></span><span class="op">(</span><span class="va">smalltree</span>, id1 <span class="op">=</span> <span class="fl">2</span>, id2 <span class="op">=</span> <span class="fl">3</span>, highlights <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                 plot <span class="op">=</span> <span class="cn">TRUE</span>, plot.type <span class="op">=</span> <span class="st">"subtract"</span><span class="op">)</span></span></code></pre></div>
<p><img src="networktree_files/figure-html/comparetree4-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="integration-with-partykit">Integration with partykit<a class="anchor" aria-label="anchor" href="#integration-with-partykit"></a>
</h3>
<p><strong><em>networktree</em></strong> uses <strong><em>partykit</em></strong> as a foundation. For those familiar with the <strong><em>partykit</em></strong> package, you may find the <code>nodevars</code> and <code>splitvars</code> arguments unintuitive. If you prefer, you can also use a formula implementation:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smalltree</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/networktree.html">networktree</a></span><span class="op">(</span><span class="va">OCIR1</span> <span class="op">+</span> <span class="va">OCIR2</span> <span class="op">+</span> <span class="va">OCIR3</span> <span class="op">~</span> <span class="va">Gender</span> <span class="op">+</span> <span class="va">Workaholism_diagnosis</span>,</span>
<span>                         data <span class="op">=</span> <span class="va">workaholic</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">smalltree</span><span class="op">)</span></span></code></pre></div>
<p><img src="networktree_files/figure-html/formula-1.png" width="100%"></p>
<p>The integration with <strong><em>partykit</em></strong> also provides other advantages. Additional arguments added to <code><a href="../reference/networktree.html">networktree()</a></code> are passed through to <code>mob_control()</code> (or <code>ctree_control()</code>). This allows for flexibility in fitting the model. For instance, here we will pass two additional arguments to set the alpha to 0.01 and use BIC pruning (although in this case, it doesn’t seem to make a difference!).</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">add_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/networktree.html">networktree</a></span><span class="op">(</span><span class="va">OCIR1</span> <span class="op">+</span> <span class="va">OCIR2</span> <span class="op">+</span> <span class="va">OCIR3</span> <span class="op">~</span> <span class="va">Gender</span> <span class="op">+</span> <span class="va">Workaholism_diagnosis</span>,</span>
<span>                               data <span class="op">=</span> <span class="va">workaholic</span>, alpha <span class="op">=</span> <span class="fl">0.01</span>, prune <span class="op">=</span> <span class="st">"BIC"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">add_params</span><span class="op">)</span></span></code></pre></div>
<p><img src="networktree_files/figure-html/partykit-1.png" width="100%"></p>
<p>This also allows us to control the plotting of the tree structure. In the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method, a list-style argument named <code>partyargs</code> allows you to pass through arguments to <code><a href="https://rdrr.io/pkg/partykit/man/party-plot.html" class="external-link">partykit::plot.party()</a></code>.</p>
<p>Here we demonstrate shrinking the tree labels:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">glasso</span>, labels <span class="op">=</span> <span class="va">OCD_names</span>,</span>
<span>     partyargs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>gp <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>cex <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># half size</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in (function (input, ...) : 'minimum' set to absolute value</span></span></code></pre>
<pre><code><span><span class="co">## Warning in (function (input, ...) : 'minimum' set to absolute value</span></span></code></pre>
<pre><code><span><span class="co">## Warning in (function (input, ...) : 'minimum' set to absolute value</span></span></code></pre>
<p><img src="networktree_files/figure-html/plot_partykit-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="integration-with-qgraph">Integration with qgraph<a class="anchor" aria-label="anchor" href="#integration-with-qgraph"></a>
</h3>
<p><strong><em>networktree</em></strong> uses <strong><em>qgraph</em></strong> to plot the networks. When using the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method, any additional arguments are passed through directly to <strong><em>qgraph</em></strong>.</p>
<p>Let’s use qgraph to make the network colorblind-friendly with the nodes laid out in a circle and labeled.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">glasso</span>, theme <span class="op">=</span> <span class="st">"colorblind"</span>, layout <span class="op">=</span> <span class="st">"circle"</span>, labels <span class="op">=</span> <span class="va">OCD_names</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">## Warning in (function (input, ...) : 'minimum' set to absolute value</span></span></code></pre>
<pre><code><span><span class="co">## Warning in (function (input, ...) : 'minimum' set to absolute value</span></span></code></pre>
<pre><code><span><span class="co">## Warning in (function (input, ...) : 'minimum' set to absolute value</span></span></code></pre>
<p><img src="networktree_files/figure-html/plot_qgraph-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h3>
<p>For more details on <strong><em>networktree</em></strong>, please refer to the <a href="https://paytonjjones.github.io/networktree/reference/" class="external-link">reference manual</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Payton Jones, Thorsten Simon, Achim Zeileis.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.9000.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
